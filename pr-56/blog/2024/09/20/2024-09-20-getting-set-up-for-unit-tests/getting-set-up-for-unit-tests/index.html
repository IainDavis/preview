<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Getting Set-Up For Unit Tests | Iain Davis</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://iaindavis.github.io/preview/pr-56/blog/2024/09/20/2024-09-20-getting-set-up-for-unit-tests/getting-set-up-for-unit-tests"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Getting Set-Up For Unit Tests | Iain Davis"><meta data-rh="true" name="description" content="It&#x27;s been a few days since I posted. That&#x27;s not because I haven&#x27;t been busy,"><meta data-rh="true" property="og:description" content="It&#x27;s been a few days since I posted. That&#x27;s not because I haven&#x27;t been busy,"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-09-20T10:48:00.000Z"><meta data-rh="true" property="article:author" content="https://iaindavis.dev"><meta data-rh="true" property="article:tag" content="Storybook,Testing,Infrastructure"><link data-rh="true" rel="icon" href="/preview/pr-56/img/logo-favicon.svg"><link data-rh="true" rel="canonical" href="https://iaindavis.github.io/preview/pr-56/blog/2024/09/20/2024-09-20-getting-set-up-for-unit-tests/getting-set-up-for-unit-tests"><link data-rh="true" rel="alternate" href="https://iaindavis.github.io/preview/pr-56/blog/2024/09/20/2024-09-20-getting-set-up-for-unit-tests/getting-set-up-for-unit-tests" hreflang="en"><link data-rh="true" rel="alternate" href="https://iaindavis.github.io/preview/pr-56/blog/2024/09/20/2024-09-20-getting-set-up-for-unit-tests/getting-set-up-for-unit-tests" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://iaindavis.github.io/preview/pr-56/blog/2024/09/20/2024-09-20-getting-set-up-for-unit-tests/getting-set-up-for-unit-tests","mainEntityOfPage":"https://iaindavis.github.io/preview/pr-56/blog/2024/09/20/2024-09-20-getting-set-up-for-unit-tests/getting-set-up-for-unit-tests","url":"https://iaindavis.github.io/preview/pr-56/blog/2024/09/20/2024-09-20-getting-set-up-for-unit-tests/getting-set-up-for-unit-tests","headline":"Getting Set-Up For Unit Tests","name":"Getting Set-Up For Unit Tests","description":"It's been a few days since I posted. That's not because I haven't been busy,","datePublished":"2024-09-20T10:48:00.000Z","author":{"@type":"Person","name":"Iain Davis","description":"Software Engineer, Principal @ IainDavis.dev","url":"https://iaindavis.dev","email":"iain@iaindavis.dev","image":"/preview/pr-56/img/authors/idavis.jpg"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://iaindavis.github.io/preview/pr-56/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/preview/pr-56/blog/rss.xml" title="IainDavis.dev | Developer Blog RSS Feed"><link rel="stylesheet" href="/preview/pr-56/assets/css/styles.8f0ff2ff.css">
<script src="/preview/pr-56/assets/js/runtime~main.33bf6a73.js" defer="defer"></script>
<script src="/preview/pr-56/assets/js/main.95b63a36.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/preview/pr-56/"><div class="navbar__logo"><img src="/preview/pr-56/img/logo/logo-compact-light.svg" alt="IainDavis.dev compact logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/preview/pr-56/img/logo/logo-compact-dark.svg" alt="IainDavis.dev compact logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">IainDavis.dev</b></a><a class="navbar__item navbar__link" href="/preview/pr-56/docs/projects/">Projects</a><a class="navbar__item navbar__link" href="/preview/pr-56/docs/brand/figma/">Brand</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/preview/pr-56/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/IainDavis" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/preview/pr-56/blog/2024/09/25/2024-09-25-externalizing-nova/externalizing-nova">Externalizing Nova</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/preview/pr-56/blog/2024/09/25/2024-09-25-deploy-to-prod-automation/deploy-to-prod-automation">Automating Production Deployments</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/preview/pr-56/blog/2024/09/24/2024-09-24-automated-preview-build/automated-preview-build">Automating a Robust Preview Environment</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/preview/pr-56/blog/2024/09/22/2024-09-22-introducing-testing-reports/introducing-testing-reports">Introducing Testing Reports</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/preview/pr-56/blog/2024/09/21/2024-09-21-unit-test-collaboration/unit-test-collaboration">Building and Refining the Expandable Component</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/preview/pr-56/blog/2024/09/20/2024-09-20-getting-set-up-for-unit-tests/getting-set-up-for-unit-tests">Getting Set-Up For Unit Tests</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/preview/pr-56/blog/2024/09/16/2024-09-16-fixing-blog-post-truncation/fixing-blog-post-truncation">Fixing Blog-Post Truncation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/preview/pr-56/blog/2024/09/16/2024-09-16-switching-automation-provider/switching-automation-provider">Switching automation providers</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/preview/pr-56/blog/2024/09/15/2024-09-15-whats-next/whats-next">What&#x27;s Next Here?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/preview/pr-56/blog/2024/09/15/2024-09-15-automating-linkedin-posts/automating-linkedin-posts">How I Automated My LinkedIn Posts</a></li></ul></div></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">Getting Set-Up For Unit Tests</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-09-20T10:48:00.000Z">September 20, 2024</time> · <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/preview/pr-56/blog/authors/iain"><img class="avatar__photo authorImage_XqGP" src="/preview/pr-56/img/authors/idavis.jpg" alt="Iain Davis"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/preview/pr-56/blog/authors/iain"><span class="authorName_yefp">Iain Davis</span></a></div><small class="authorTitle_nd0D" title="Software Engineer, Principal @ IainDavis.dev">Software Engineer, Principal @ IainDavis.dev</small><div class="authorSocials_rSDt"><a href="https://github.com/IainDavis" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a><a href="https://www.linkedin.com/in/iaindavis-dev/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" class="authorSocialLink_owbf"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453" fill="#0A66C2"></path></svg></a><a href="https://stackoverflow.com/users/11380293/iaindavis-dev" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="Stack Overflow"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 169.61 200" width="1em" height="1em" class="authorSocialLink_owbf"><path d="M140.44 178.38v-48.65h21.61V200H0v-70.27h21.61v48.65z" fill="#bcbbbb"></path><path d="M124.24 140.54l4.32-16.22-86.97-17.83-3.78 17.83zM49.7 82.16L130.72 120l7.56-16.22-81.02-37.83zm22.68-40l68.06 57.3 11.35-13.51-68.6-57.3-11.35 13.51zM116.14 0l-14.59 10.81 53.48 71.89 14.58-10.81zM37.81 162.16h86.43v-16.21H37.81z" fill="#f48024"></path></svg></a><a href="https://www.reddit.com/user/IainDavis-dev/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="reddit"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="authorSocialLink_owbf"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path><path d="M3.6 9h16.8"></path><path d="M3.6 15h16.8"></path><path d="M11.5 3a17 17 0 0 0 0 18"></path><path d="M12.5 3a17 17 0 0 1 0 18"></path></svg></a></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>It&#x27;s been a few days since I posted. That&#x27;s not because I haven&#x27;t been busy,
it&#x27;s because setting up unit testing turned out to be <em>much harder</em> than I
anticipated.</p>
<p>To be fair, I was trying to achieve a somewhat complex setup.</p>
<p></p>
<!-- -->
<p>Honestly, I could have mocked the MDX inputs, and in a professional setting
that&#x27;s what I would have done.</p>
<p>But what would I learn from that?</p>
<p>In the past, I&#x27;ve not really had to set up many JavaScript repositories. I&#x27;ve
joined an already active project, or used a paved road, and I just started
writing tests. I figured that&#x27;s more or less what would happen here.</p>
<p>Part of the problem is that Docusaurus and Storybook both use webpack by
default, to preprocess and bundle code. Jest doesn&#x27;t do that, so I had to figure
out how to emulate that behavior. In particular, I needed to tell it how to
handle the imported <code>.mdx</code> content. That turned out to be surprisingly
difficult. My AI coding assitant did their best to help, but I was getting a
considerable amount of hallucination and just outdated information. To make
things worse the problem was large enough that the AI seemed to keep forgetting
context and taking me back around paths we&#x27;d already been over.</p>
<p>In the end, we ended up creating a custom Jest transformer that leveraged the
<code>@mdx-js/mdx</code> library and babel to handle the transformation. That got us much
closer, but we began getting more errors from the produced JSX having
unrecognized attributes (<code>parentName</code>, <code>mdxType</code>) and including a <code>wrapper</code>
element that React didn&#x27;t know what to do with.</p>
<p>Another round of fixes... the best solution I ended up with was monkey-patching
React.createElement in <code>jest.setup.ts</code> to have some special handling for the
<code>wrapper</code> component and strip out the unrecognized MDX elements.</p>
<p>And we got it working! I had two unit tests passing, one of which incorporated a
Storybook story, which in turn incorporated some boilerplate MDX content, which
is what I was trying to achieve.</p>
<p>Round of drinks, high fives all around, call it a night.</p>
<p>The next day, I fell victim to that most insidious of demons, the one that
whispers in your ear and says &quot;yeah, go ahead and commit these changes but...
<em>while</em> you&#x27;re committing, shouldn&#x27;t you just refactor a bit? Surely that bit
over there couldn&#x27;t hurt anything. It&#x27;s practically a separate module.&quot;</p>
<p>Needless to say, I broke my working solution. Part of (but I don&#x27;t think all of)
the break had to do with upgrading my dependencies with yarn, so <em>I suspect</em> it
would have broken eventually anyway, which is kind of disappointing, but also
makes me feel marginally less stupid about it.</p>
<p>The problem we began to run into was that <code>@mdx-js</code> has switched over to
ESModules-only. No more CommonJS support, which is what Jest expects to use. My
transformer wouldn&#x27;t compile anymore, because it couldn&#x27;t import anything from
<code>@mdx-js</code>.</p>
<p>Well that&#x27;s fixable, right? We&#x27;re using Jest 29, which supports transformers
that provide a <code>processAsync</code> method. Shouldn&#x27;t be a problem. We&#x27;ll just throw a
few async/awaits in there, rename the <code>process</code> method, and we&#x27;ll be good to go.</p>
<p>Y&#x27;all, I tried for hours to get Jest to recognize that <code>processAsync</code> method.
When the <code>process</code> method was absent, Jest would throw an exception and not run
the transformer at all. When both <code>process</code> and <code>processAsync</code> were present,
Jest automatically preferred <code>process</code>, and no way I could figure out to force
it to use the async method so I could do a dynamic import of an ESModule in the
CommonJS context that Jest uses.</p>
<p>The last thing we tried was to abandon the Jest Transformer approach entirely
and try to write our own babel plugin, but we ended up with basically the same
errors.</p>
<p>No luck.</p>
<p>Finally, I decided if <code>Jest</code> was the problem, maybe it was worth pursuing
alternatives. I&#x27;m so used to Jest, it honestly didn&#x27;t occur to me to use
anything else.</p>
<p>This morning I gave up and set up <code>Vitest</code>. I actually still had a little
trouble with ESModules/CommonJS importing, but resolving it was much, much
easier. I probably spent an hour on it this morning, total. That includes
learning a bit about it, adding the relevant VS Code extension and making the
changes.</p>
<p>I now have the same two unit tests running. I have fewer custom build components
(no Jest transformer, no Babel plugin, no monkey-patching of
<code>React.createElement</code>).</p>
<p>And I have to say, there&#x27;s a noticable difference, even with my currently
trivial test suite, in how fast the tests run.</p>
<p>I&#x27;m a little disappointed that Docusaurus and Storybook are now on different
build tools than my tests, but I think the benefits far outweight the
disadvantages. And Storybook supports Vite, so I may migrate it eventually as
well. Unfortunately, Docusaurus is webpack-only for now.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-i-learned-from-all-this">What I learned from all this<a href="#what-i-learned-from-all-this" class="hash-link" aria-label="Direct link to What I learned from all this" title="Direct link to What I learned from all this">​</a></h2>
<p>How different JS tools and build configurations hang together. This has always
been a bit of a frustrating thicket to wade into for me, and I feel like I
understand it just a little better after all this.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-go-about-modifying-webpack-babel-jest">How to go about modifying Webpack, Babel, Jest<a href="#how-to-go-about-modifying-webpack-babel-jest" class="hash-link" aria-label="Direct link to How to go about modifying Webpack, Babel, Jest" title="Direct link to How to go about modifying Webpack, Babel, Jest">​</a></h2>
<p>It hadn&#x27;t really occurred to me before to solve a problem by writing custom
extensions, and now I&#x27;ve written them for all three of these tools. It never
really seemed strange to me to write a decorator or addon for Storybook, and I
don&#x27;t know why that should be any different really, but here we are. I guess
I&#x27;ve just been conditioned no to mess with the build.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="persistence">Persistence<a href="#persistence" class="hash-link" aria-label="Direct link to Persistence" title="Direct link to Persistence">​</a></h2>
<p>I&#x27;d never do this in a professional setting, but I&#x27;m glad I chased the Jest
solution down. It was a pretty satisfying feeling to see that &quot;2 tests passed&quot;
after all the struggle it took to get there.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="give-up-sooner">Give up sooner<a href="#give-up-sooner" class="hash-link" aria-label="Direct link to Give up sooner" title="Direct link to Give up sooner">​</a></h2>
<p>Okay, that&#x27;s a contradiction. But I guess what I really mean is think outside
the box for another solution. I started with the assumption that &quot;Jest is what
you use&quot; and it cost me some time, even if it wasn&#x27;t a total loss. I could have
gotten to a solution much sooner.</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="Posts to do with configuring or using Storybook" class="tag_zVej tagRegular_sFm0" href="/preview/pr-56/blog/tags/storybook">Storybook</a></li><li class="tag_QGVx"><a title="Posts to do with tests" class="tag_zVej tagRegular_sFm0" href="/preview/pr-56/blog/tags/testing">Testing</a></li><li class="tag_QGVx"><a title="Posts to do with setup and maintenance for Repositories, builds, etc." class="tag_zVej tagRegular_sFm0" href="/preview/pr-56/blog/tags/infrastructure">Infrastructure</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2024-09-20-getting-set-up-for-unit-tests/2024-09-20-getting-set-up-for-unit-tests.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/preview/pr-56/blog/2024/09/21/2024-09-21-unit-test-collaboration/unit-test-collaboration"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Building and Refining the Expandable Component</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/preview/pr-56/blog/2024/09/16/2024-09-16-fixing-blog-post-truncation/fixing-blog-post-truncation"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Fixing Blog-Post Truncation</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-i-learned-from-all-this" class="table-of-contents__link toc-highlight">What I learned from all this</a></li><li><a href="#how-to-go-about-modifying-webpack-babel-jest" class="table-of-contents__link toc-highlight">How to go about modifying Webpack, Babel, Jest</a></li><li><a href="#persistence" class="table-of-contents__link toc-highlight">Persistence</a></li><li><a href="#give-up-sooner" class="table-of-contents__link toc-highlight">Give up sooner</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Iain S. Davis Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>